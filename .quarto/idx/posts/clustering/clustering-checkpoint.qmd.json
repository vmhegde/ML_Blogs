{"title":"Clustering - Finding Clusters in Earthquake data","markdown":{"yaml":{"title":"Clustering - Finding Clusters in Earthquake data","jupyter":"python3"},"headingText":"Plot the original data on a scatterplot","containsRefs":false,"markdown":"\n\n-   Dataset - Depth vs Magnitude of earthquakes that have occurred\n-   Plot original data on a scatterplot\n-   Use KMeans for clustering - 3 clusters\n-   Plot clusters and cluster centers\n\n```{python}\n#| tags: []\nimport sys\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nassert sys.version_info >= (3, 7)\n```\n\n```{python}\n#| tags: []\nfrom packaging import version\nimport sklearn\n\nassert version.parse(sklearn.__version__) >= version.parse(\"1.0.1\")\n```\n\nFirst we will read the earthquake data. The goal is to find clusters correlating earthquake depth to earthquake magnitude.\n\n```{python}\n#| tags: []\ndf = pd.read_csv(\"./earthquake_data-checkpoint.csv\")\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\n```\n\n\n```{python}\n#| tags: []\nimport matplotlib.pyplot as plt\n\nplt.rc('font', size=14)\nplt.rc('axes', labelsize=14, titlesize=14)\nplt.rc('legend', fontsize=14)\nplt.rc('xtick', labelsize=10)\nplt.rc('ytick', labelsize=10)\nplt.figure(figsize=(10, 4))\n\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\nplt.scatter(X, y, marker='*')\nplt.xlabel(\"$depth$\")\nplt.ylabel(\"$magnitude$\", rotation=90)\n#plt.axis([90, 160, 60, 75])\nplt.grid()\nplt.show()\n```\n\nNow we will run the KMeans algorithm to yield 2 clusters. The algorithm will run 10 times. We are running the algorithm on the first 500 data points in the set.\n\n### Clustering Based on Magnitude and Depth\n\nBy applying KMeans clustering to the magnitude and depth of earthquakes, we can identify distinct categories of earthquakes. These categories might reveal patterns such as typical depth ranges for different magnitudes and help in understanding the nature of seismic activities.\n\n### Interpreting Cluster Results\n\nThe results from clustering will provide insights into the distribution and characteristics of earthquake events. For instance, clusters might indicate areas prone to high-magnitude earthquakes or regions with frequent but shallow seismic activities. This analysis is essential for disaster preparedness and mitigation strategies.\n\n```{python}\n#| tags: []\nfrom sklearn.cluster import KMeans\nimport numpy as np\n\nk_means = KMeans(init=\"k-means++\", n_clusters=2, n_init=10)\n#X = [df['depth'][0:200], df['magnitude'][0:200]]\nX = []\nfor i in range(500):\n    X.append([df['depth'][i], df['magnitude'][i]])\nk_means.fit(X)\n```\n\nAfter running the algorithm, we can obtain the cluster centers that were found.\n\n```{python}\n#| tags: []\nfrom sklearn.metrics.pairwise import pairwise_distances_argmin\n\nk_means_cluster_centers = k_means.cluster_centers_\nk_means_labels = pairwise_distances_argmin(X, k_means_cluster_centers)\n```\n\n## KMeans Clustering Results\n\nIn each iteration of the KMeans algorithm, the centroids of the clusters are adjusted to minimize the variance within each cluster. The following plots show how the cluster centroids and the assignment of points to clusters change with each iteration.\n\n### Initial Iteration\n\nIn the initial iteration, the centroids are randomly placed. The points are assigned to the nearest centroid, forming the initial clusters.\n\n### Subsequent Iterations\n\nIn each subsequent iteration, the centroids are recalculated as the mean of the points in each cluster. The points are then reassigned to the closest new centroid. This process continues until the centroids stabilize and no longer change significantly.\n\n### Final Clusters\n\nAfter a number of iterations, the centroids converge to a position where they best represent the centers of the clusters. The final plot shows the stable clusters where each point is grouped with similar points, minimizing the variance within each cluster.\n\n```{python}\n#| tags: []\nfrom sklearn.cluster import KMeans\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nX = np.array(X)\n\n# Number of clusters\nnum_clusters = 3  # Example number of clusters\n\n# Create KMeans instance\nkmeans = KMeans(n_clusters=num_clusters, random_state=42)\n\n# Number of iterations for demonstration\nnum_iterations = 5\n\n# Plotting the clusters for each iteration\nfor i in range(num_iterations):\n    # Run KMeans for a number of iterations\n    kmeans.n_init = i + 1\n    kmeans.fit(X)\n    \n    # Plotting the data and centroids\n    plt.figure(figsize=(8, 6))\n    plt.scatter(X[:, 0], X[:, 1], c=kmeans.labels_, cmap='viridis')\n    plt.scatter(kmeans.cluster_centers_[:, 0], kmeans.cluster_centers_[:, 1], s=300, c='red', label='Centroids')\n    plt.title(f'Clusters after {i + 1} iterations')\n    plt.xlabel('Depth (km)')\n    plt.ylabel('Magnitude')\n    plt.legend()\n    plt.show()\n```\n\n## Interpretation\n\nThe final clusters show three distinct groups of earthquakes. There is a noticeable cluster of earthquakes with a smaller depth range but higher magnitudes, possibly indicating a pattern of seismic activity that could be of interest for further investigation.\n","srcMarkdownNoYaml":"\n\n-   Dataset - Depth vs Magnitude of earthquakes that have occurred\n-   Plot original data on a scatterplot\n-   Use KMeans for clustering - 3 clusters\n-   Plot clusters and cluster centers\n\n```{python}\n#| tags: []\nimport sys\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nassert sys.version_info >= (3, 7)\n```\n\n```{python}\n#| tags: []\nfrom packaging import version\nimport sklearn\n\nassert version.parse(sklearn.__version__) >= version.parse(\"1.0.1\")\n```\n\nFirst we will read the earthquake data. The goal is to find clusters correlating earthquake depth to earthquake magnitude.\n\n```{python}\n#| tags: []\ndf = pd.read_csv(\"./earthquake_data-checkpoint.csv\")\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\n```\n\n## Plot the original data on a scatterplot\n\n```{python}\n#| tags: []\nimport matplotlib.pyplot as plt\n\nplt.rc('font', size=14)\nplt.rc('axes', labelsize=14, titlesize=14)\nplt.rc('legend', fontsize=14)\nplt.rc('xtick', labelsize=10)\nplt.rc('ytick', labelsize=10)\nplt.figure(figsize=(10, 4))\n\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\nplt.scatter(X, y, marker='*')\nplt.xlabel(\"$depth$\")\nplt.ylabel(\"$magnitude$\", rotation=90)\n#plt.axis([90, 160, 60, 75])\nplt.grid()\nplt.show()\n```\n\nNow we will run the KMeans algorithm to yield 2 clusters. The algorithm will run 10 times. We are running the algorithm on the first 500 data points in the set.\n\n### Clustering Based on Magnitude and Depth\n\nBy applying KMeans clustering to the magnitude and depth of earthquakes, we can identify distinct categories of earthquakes. These categories might reveal patterns such as typical depth ranges for different magnitudes and help in understanding the nature of seismic activities.\n\n### Interpreting Cluster Results\n\nThe results from clustering will provide insights into the distribution and characteristics of earthquake events. For instance, clusters might indicate areas prone to high-magnitude earthquakes or regions with frequent but shallow seismic activities. This analysis is essential for disaster preparedness and mitigation strategies.\n\n```{python}\n#| tags: []\nfrom sklearn.cluster import KMeans\nimport numpy as np\n\nk_means = KMeans(init=\"k-means++\", n_clusters=2, n_init=10)\n#X = [df['depth'][0:200], df['magnitude'][0:200]]\nX = []\nfor i in range(500):\n    X.append([df['depth'][i], df['magnitude'][i]])\nk_means.fit(X)\n```\n\nAfter running the algorithm, we can obtain the cluster centers that were found.\n\n```{python}\n#| tags: []\nfrom sklearn.metrics.pairwise import pairwise_distances_argmin\n\nk_means_cluster_centers = k_means.cluster_centers_\nk_means_labels = pairwise_distances_argmin(X, k_means_cluster_centers)\n```\n\n## KMeans Clustering Results\n\nIn each iteration of the KMeans algorithm, the centroids of the clusters are adjusted to minimize the variance within each cluster. The following plots show how the cluster centroids and the assignment of points to clusters change with each iteration.\n\n### Initial Iteration\n\nIn the initial iteration, the centroids are randomly placed. The points are assigned to the nearest centroid, forming the initial clusters.\n\n### Subsequent Iterations\n\nIn each subsequent iteration, the centroids are recalculated as the mean of the points in each cluster. The points are then reassigned to the closest new centroid. This process continues until the centroids stabilize and no longer change significantly.\n\n### Final Clusters\n\nAfter a number of iterations, the centroids converge to a position where they best represent the centers of the clusters. The final plot shows the stable clusters where each point is grouped with similar points, minimizing the variance within each cluster.\n\n```{python}\n#| tags: []\nfrom sklearn.cluster import KMeans\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nX = np.array(X)\n\n# Number of clusters\nnum_clusters = 3  # Example number of clusters\n\n# Create KMeans instance\nkmeans = KMeans(n_clusters=num_clusters, random_state=42)\n\n# Number of iterations for demonstration\nnum_iterations = 5\n\n# Plotting the clusters for each iteration\nfor i in range(num_iterations):\n    # Run KMeans for a number of iterations\n    kmeans.n_init = i + 1\n    kmeans.fit(X)\n    \n    # Plotting the data and centroids\n    plt.figure(figsize=(8, 6))\n    plt.scatter(X[:, 0], X[:, 1], c=kmeans.labels_, cmap='viridis')\n    plt.scatter(kmeans.cluster_centers_[:, 0], kmeans.cluster_centers_[:, 1], s=300, c='red', label='Centroids')\n    plt.title(f'Clusters after {i + 1} iterations')\n    plt.xlabel('Depth (km)')\n    plt.ylabel('Magnitude')\n    plt.legend()\n    plt.show()\n```\n\n## Interpretation\n\nThe final clusters show three distinct groups of earthquakes. There is a noticeable cluster of earthquakes with a smaller depth range but higher magnitudes, possibly indicating a pattern of seismic activity that could be of interest for further investigation.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"clustering-checkpoint.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","theme":"cosmo","title-block-banner":true,"title":"Clustering - Finding Clusters in Earthquake data","jupyter":"python3"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}